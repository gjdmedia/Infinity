{"version":3,"sources":["./src/app/deals/listing/deals-listing.page.html","./src/app/deals/listing/deals-listing.resolver.ts","./src/app/deals/listing/deals-listing.page.ts","./node_modules/dayjs/plugin/relativeTime.js","./src/app/pipes/time-ago.pipe.ts","./src/app/deals/listing/deals-listing.module.ts"],"names":[],"mappings":"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","file":"deals-listing-deals-listing-module-ngfactory-es2015.js","sourcesContent":["<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Deals Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"deals-listing-content\">\n  <ng-container *ngIf=\"listing?.items\">\n    <div class=\"listing-item\" *ngFor=\"let item of listing.items\" [ngClass]=\"{'ended': ((item.expirationDate | appTimeDifference) < 0), 'imminent-end': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) > 2 && (item.expirationDate | appTimeDifference) < 10), 'distant-end': ((item.expirationDate | appTimeDifference) >= 10)}\">\n      <ion-row class=\"top-row\">\n        <ion-col class=\"logo-col\" size=\"6\">\n          <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\n            <app-image-shell [src]=\"item.logo\" [alt]=\"'deals logo'\" class=\"deal-logo\" animation=\"spinner\"></app-image-shell>\n          </app-aspect-ratio>\n        </ion-col>\n        <ion-col *ngIf=\"((item.expirationDate | appTimeDifference) > 0)\" class=\"call-to-action-col\">\n          <ion-button class=\"claim-button\" expand=\"block\" color=\"claim\" [routerLink]=\"['/app/categories/deals/', item.slug]\">\n            <span class=\"button-cta\">CLAIM</span>\n            <ion-icon slot=\"end\" name=\"arrow-forward\"></ion-icon>\n          </ion-button>\n        </ion-col>\n        <ion-col *ngIf=\"((item.expirationDate | appTimeDifference) < 0)\" class=\"call-to-action-col\">\n          <span class=\"expired-cta\">EXPIRED</span>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"middle-row\">\n        <ion-col class=\"info-col\">\n          <h4 class=\"item-name\">\n            <a class=\"name-anchor\" [routerLink]=\"['/app/categories/deals/', item.slug]\">\n              <app-text-shell animation=\"bouncing\" [data]=\"item.name\"></app-text-shell>\n            </a>\n          </h4>\n          <p class=\"item-description\">\n            <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"item.description\"></app-text-shell>\n          </p>\n        </ion-col>\n        <ion-col size=\"2\">\n          <ion-button class=\"bookmark-button\" expand=\"block\" fill=\"clear\" color=\"claim\">\n            <ion-icon slot=\"icon-only\" name=\"pricetag\"></ion-icon>\n          </ion-button>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"bottom-row\">\n        <ion-col class=\"code-wrapper\">\n          <span class=\"code-cta\">Use this code:</span>\n          <span class=\"item-code\" [ngClass]=\"{'expired': ((item.expirationDate | appTimeDifference) < 0)}\">\n            <app-text-shell [data]=\"item.code\"></app-text-shell>\n          </span>\n        </ion-col>\n        <ion-col class=\"time-left-wrapper\" size=\"5\" [ngClass]=\"{'countdown-active': ((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2)}\">\n          <span class=\"expiration-cta\">DEAL {{ ((item.expirationDate | appTimeDifference) < 0) ? 'EXPIRED' : 'EXPIRES IN' }}:</span>\n          <ng-container *ngIf=\"((item.expirationDate | appTimeDifference) < 0 || (item.expirationDate | appTimeDifference) > 2)\">\n            <span class=\"item-time-left\">\n              <app-text-shell [data]=\"(item.expirationDate | appTimeAgo)\"></app-text-shell>\n            </span>\n          </ng-container>\n          <ng-container *ngIf=\"((item.expirationDate | appTimeDifference) > 0 && (item.expirationDate | appTimeDifference) <= 2)\">\n            <ion-row class=\"countdown-wrapper\">\n              <app-countdown-timer class=\"item-countdown\" fill=\"inner-time\" [end]=\"item.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\n            </ion-row>\n          </ng-container>\n        </ion-col>\n      </ion-row>\n    </div>\n  </ng-container>\n</ion-content>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { DealsService } from '../deals.service';\nimport { DealsListingModel } from './deals-listing.model';\n\n@Injectable()\nexport class DealsListingResolver implements Resolve<DataStore<DealsListingModel>> {\n\n  constructor(private dealsService: DealsService) {}\n\n  resolve(): DataStore<DealsListingModel> {\n    const dataSource: Observable<DealsListingModel> = this.dealsService.getListingDataSource();\n    const dataStore: DataStore<DealsListingModel> = this.dealsService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { DealsListingModel } from './deals-listing.model';\n\n@Component({\n  selector: 'app-deals-listing',\n  templateUrl: './deals-listing.page.html',\n  styleUrls: [\n    './styles/deals-listing.page.scss',\n    './styles/deals-listing.shell.scss',\n    './styles/deals-listing.ios.scss'\n  ]\n})\nexport class DealsListingPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  listing: DealsListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    // On init, the route subscription is the active subscription\n    this.subscriptions = this.route.data\n    .subscribe(\n      (resolvedRouteData: IResolvedRouteData<DealsListingModel>) => {\n        // Route subscription resolved, now the active subscription is the Observable extracted from the resolved route data\n        this.subscriptions = ResolverHelper.extractData<DealsListingModel>(resolvedRouteData.data, DealsListingModel)\n        .subscribe(\n          (state) => {\n            this.listing = state;\n          },\n          (error) => {}\n        );\n      },\n      (error) => {}\n    );\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","!function(r,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):r.dayjs_plugin_relativeTime=t()}(this,function(){\"use strict\";return function(r,t,e){r=r||{};var n=t.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};e.en.relativeTime=o;var d=function(t,n,d,i){for(var u,a,s,f=d.$locale().relativeTime||o,l=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],h=l.length,m=0;m<h;m+=1){var c=l[m];c.d&&(u=i?e(t).diff(d,c.d,!0):d.diff(t,c.d,!0));var y=(r.rounding||Math.round)(Math.abs(u));if(s=u>0,y<=c.r||!c.r){y<=1&&m>0&&(c=l[m-1]);var p=f[c.l];a=\"string\"==typeof p?p.replace(\"%d\",y):p(y,n,c.l,s);break}}return n?a:(s?f.future:f.past).replace(\"%s\",a)};n.to=function(r,t){return d(r,t,this,!0)},n.from=function(r,t){return d(r,t,this)};var i=function(r){return r.$u?e.utc():e()};n.toNow=function(r){return this.to(i(this),r)},n.fromNow=function(r){return this.from(i(this),r)}}});\n","import { Pipe, PipeTransform } from '@angular/core';\n\nimport * as dayjs from 'dayjs';\nimport * as relativeTime from 'dayjs/plugin/relativeTime';\n\n@Pipe({ name: 'appTimeAgo' })\nexport class TimeAgoPipe implements PipeTransform {\n  transform(value: any): string {\n    dayjs.extend(relativeTime);\n    let timeAgo = '';\n\n    if (value) {\n      const withoutSuffix = (dayjs(value).diff(dayjs(), 'day') < 0) ? false : true;\n      timeAgo = dayjs().to(dayjs(value), withoutSuffix);\n    }\n\n    return timeAgo;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../pipes/pipes.module';\n\nimport { DealsService } from '../deals.service';\nimport { DealsListingPage } from './deals-listing.page';\nimport { DealsListingResolver } from './deals-listing.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DealsListingPage,\n    resolve: {\n      data: DealsListingResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    PipesModule,\n    HttpClientModule\n  ],\n  declarations: [\n    DealsListingPage\n  ],\n  providers: [\n    DealsListingResolver,\n    DealsService\n  ]\n})\nexport class DealsListingPageModule {}\n"],"sourceRoot":"webpack:///"}
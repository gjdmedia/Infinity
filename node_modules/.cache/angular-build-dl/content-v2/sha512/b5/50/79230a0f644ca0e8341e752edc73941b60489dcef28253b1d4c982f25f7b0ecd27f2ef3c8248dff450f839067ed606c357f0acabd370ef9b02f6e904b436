{"version":3,"sources":["webpack:///src/app/travel/listing/travel-listing.module.ts","webpack:///src/app/travel/listing/travel-listing.page.html","webpack:///src/app/travel/listing/travel-listing.page.ts","webpack:///src/app/travel/listing/travel-listing.plain.resolver.ts","webpack:///src/app/travel/listing/travel-listing.resolver.ts","webpack:///src/app/utils/resolver-helper.ts"],"names":["routes","path","component","resolve","data","TravelListingPageModule","TravelListingPage","route","subscriptions","subscribe","resolvedRouteData","extractData","state","listing","error","unsubscribe","isShell","TravelListingPlainResolver","travelService","getListingDataSource","TravelListingResolver","dataSource","dataStore","getListingStore","ResolverHelper","source","constructor"],"mappings":"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","file":"travel-listing-travel-listing-module-ngfactory-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\n\nimport { TravelService } from '../travel.service';\nimport { TravelListingPage } from './travel-listing.page';\nimport { TravelListingResolver } from './travel-listing.resolver';\nimport { TravelListingPlainResolver } from './travel-listing.plain.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TravelListingPage,\n    resolve: {\n      data: TravelListingResolver\n      // data: TravelListingPlainResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    HttpClientModule\n  ],\n  declarations: [\n    TravelListingPage\n  ],\n  providers: [\n    TravelListingResolver,\n    TravelListingPlainResolver,\n    TravelService\n  ]\n})\nexport class TravelListingPageModule {}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Travel Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ng-container *ngIf=\"listing?.items\">\n    <div class=\"listing-item\" *ngFor=\"let item of listing.items\">\n      <ion-row class=\"image-row\">\n        <ion-col size=\"12\">\n          <app-image-shell [display]=\"'cover'\" class=\"add-overlay item-image\" [src]=\"item.image\" [routerLink]=\"['/app/categories/travel/', item.slug]\">\n            <app-aspect-ratio [ratio]=\"{w:3, h:2}\">\n              <div class=\"content-inside-item-image\">\n                <div class=\"item-icon\">\n                  <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\n                    <app-image-shell [src]=\"item.icon\" class=\"icon-image\"></app-image-shell>\n                  </app-aspect-ratio>\n                </div>\n                <div class=\"item-cta\">\n                  <span>Explore</span>\n                  <ion-icon class=\"cta-icon\" name=\"arrow-forward\"></ion-icon>\n                </div>\n              </div>\n            </app-aspect-ratio>\n          </app-image-shell>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"info-row\">\n        <ion-col class=\"main-info-col\">\n          <h3 class=\"item-name\">\n            <a class=\"name-anchor\" [routerLink]=\"['/app/categories/travel/', item.slug]\">\n              <app-text-shell animation=\"bouncing\" [data]=\"(item?.name && item?.category) ? (item.name + ' - ' + item.category) : (item.name)\"></app-text-shell>\n            </a>\n          </h3>\n          <p class=\"item-description\">\n            <app-text-shell animation=\"bouncing\" [data]=\"item.description\" lines=\"3\"></app-text-shell>\n          </p>\n          <p class=\"item-address\">\n            <app-text-shell animation=\"bouncing\" [data]=\"item.address\"></app-text-shell>\n          </p>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"stats-row\">\n        <ion-col size=\"2\" class=\"item-rating\">\n          <span class=\"rating-value\">\n            <app-text-shell [data]=\"item.rating\"></app-text-shell>\n          </span>\n          <ion-icon class=\"stats-icon\" src=\"./assets/custom-icons/travel/star.svg\"></ion-icon>\n        </ion-col>\n        <ion-col size=\"2\" class=\"item-reviews\">\n          <span class=\"reviews-count\">\n            <app-text-shell [data]=\"item.reviewsCount\"></app-text-shell>\n          </span>\n          <ion-icon class=\"stats-icon\" src=\"./assets/custom-icons/travel/comments.svg\"></ion-icon>\n        </ion-col>\n      </ion-row>\n    </div>\n  </ng-container>\n</ion-content>\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { TravelListingModel } from './travel-listing.model';\n// import { delay, finalize } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-travel-listing',\n  templateUrl: './travel-listing.page.html',\n  styleUrls: [\n    './styles/travel-listing.page.scss',\n    './styles/travel-listing.shell.scss'\n  ]\n})\nexport class TravelListingPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  listing: TravelListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(\n    private route: ActivatedRoute\n  ) { }\n\n  ngOnInit(): void {\n    // On init, the route subscription is the active subscription\n    this.subscriptions = this.route.data\n    // .pipe(\n    //   delay(2000),\n    //   finalize(() => console.log('dataSubscription [finalize()]'))\n    // )\n    .subscribe(\n      (resolvedRouteData: IResolvedRouteData<TravelListingModel>) => {\n        // Route subscription resolved, now the active subscription is the Observable extracted from the resolved route data\n        this.subscriptions = ResolverHelper.extractData<TravelListingModel>(resolvedRouteData.data, TravelListingModel)\n        // .pipe(\n        //   delay(8000),\n        //   finalize(() => console.log('listingDataStore.subscribe [finalize()]'))\n        // )\n        .subscribe(\n          (state) => {\n            // console.log('GOT STATE');\n            this.listing = state;\n          },\n          (error) => {}\n        );\n      },\n      (error) => {}\n    );\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    // console.log('TravelListingPage [ionViewWillLeave]');\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { TravelService } from '../travel.service';\nimport { TravelListingModel } from './travel-listing.model';\n\n@Injectable()\nexport class TravelListingPlainResolver implements Resolve<TravelListingModel> {\n\n  constructor(private travelService: TravelService) {}\n\n  resolve(): Observable<TravelListingModel> {\n    return this.travelService.getListingDataSource();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { TravelService } from '../travel.service';\nimport { TravelListingModel } from './travel-listing.model';\n\n@Injectable()\nexport class TravelListingResolver implements Resolve<DataStore<TravelListingModel>> {\n\n  constructor(private travelService: TravelService) {}\n\n  resolve(): DataStore<TravelListingModel> {\n    const dataSource: Observable<TravelListingModel> = this.travelService.getListingDataSource();\n    const dataStore: DataStore<TravelListingModel> = this.travelService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n"]}
{"version":3,"sources":["webpack:///src/app/deals/details/deals-details.module.ts","webpack:///src/app/deals/details/deals-details.page.html","webpack:///src/app/deals/details/deals-details.page.ts","webpack:///src/app/deals/details/deals-details.resolver.ts"],"names":["routes","path","component","resolve","data","DealsDetailsPageModule","DealsDetailsPage","route","slidesOptions","zoom","toggle","subscriptions","subscribe","resolvedRouteData","extractData","state","details","error","unsubscribe","isShell","DealsDetailsResolver","dealsService","dataSource","getDetailsDataSource","dataStore","getDetailsStore"],"mappings":"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","file":"deals-details-deals-details-module-ngfactory-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\nimport { PipesModule } from '../../pipes/pipes.module';\n\nimport { DealsService } from '../deals.service';\nimport { DealsDetailsPage } from './deals-details.page';\nimport { DealsDetailsResolver } from './deals-details.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DealsDetailsPage,\n    resolve: {\n      data: DealsDetailsResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    PipesModule,\n    HttpClientModule\n  ],\n  declarations: [\n    DealsDetailsPage\n  ],\n  providers: [\n    DealsDetailsResolver,\n    DealsService\n  ]\n})\nexport class DealsDetailsPageModule {}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories/deals\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Deals Details</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"deals-details-content\" [ngClass]=\"{'ended': ((details?.expirationDate | appTimeDifference) < 0), 'imminent-end': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2), 'ends-soon': ((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) > 2 && (details?.expirationDate | appTimeDifference) < 10), 'distant-end': ((details?.expirationDate | appTimeDifference) >= 10)}\">\n  <ion-row class=\"expiration-countdown\" *ngIf=\"((details?.expirationDate | appTimeDifference) > 0 && (details?.expirationDate | appTimeDifference) <= 2)\">\n    <span class=\"expiration-lead\">Deal expires in:</span>\n    <app-countdown-timer class=\"item-countdown\" fill=\"countdown\" [end]=\"details?.expirationDate\" [units]=\"{from: 'hour', to: 'second'}\"></app-countdown-timer>\n  </ion-row>\n\n  <div class=\"details-wrapper\">\n    <ion-row class=\"slider-row\">\n      <ion-slides class=\"details-slides\" pager=\"true\" [options]=\"slidesOptions\">\n        <ion-slide class=\"\" *ngFor=\"let image of details?.showcaseImages\">\n          <ion-row class=\"slide-inner-row\">\n            <app-aspect-ratio [ratio]=\"{w: 56, h: 40}\">\n              <app-image-shell [src]=\"image\" [alt]=\"'deals details'\" class=\"showcase-image\" animation=\"spinner\"></app-image-shell>\n            </app-aspect-ratio>\n          </ion-row>\n        </ion-slide>\n      </ion-slides>\n    </ion-row>\n    <ion-row class=\"description-row\">\n      <ion-col class=\"logo-col\" size=\"6\">\n        <app-aspect-ratio [ratio]=\"{w: 128, h: 32}\">\n          <app-image-shell [src]=\"details?.logo\" [alt]=\"'deals details'\" class=\"logo-image\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n      <ion-col class=\"info-col\" size=\"9\">\n        <h4 class=\"details-name\">\n          <app-text-shell animation=\"bouncing\" [data]=\"details?.name\"></app-text-shell>\n        </h4>\n        <p class=\"details-description\">\n          <app-text-shell animation=\"bouncing\" lines=\"3\" [data]=\"details?.description\"></app-text-shell>\n        </p>\n      </ion-col>\n      <ion-col class=\"preview-image-col\" size=\"3\">\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\n          <app-image-shell [src]=\"details?.previewImage\" [alt]=\"'deals details'\" class=\"preview-image\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n    </ion-row>\n    <ion-row class=\"promo-row\">\n      <h3 class=\"promo-title\">Copy the Code</h3>\n      <ion-col size=\"8\">\n        <p class=\"promo-description\">\n          Paste this code at checkout to get an extra 50% off\n        </p>\n      </ion-col>\n      <ion-col size=\"6\">\n        <ion-button class=\"promo-code-btn\" expand=\"block\" shape=\"round\" fill=\"outline\" color=\"claim\">\n          <span class=\"promo-code\">\n            <app-text-shell [data]=\"details?.code\"></app-text-shell>\n          </span>\n        </ion-button>\n      </ion-col>\n      <ion-col size=\"8\">\n        <p class=\"promo-instructions\">\n          Go to <a class=\"instructions-anchor\" target=\"_blank\" href=\"https://google.com/search?q=chocolate\">lancasternutcandy.com</a> and paste the code at checkout.\n        </p>\n      </ion-col>\n    </ion-row>\n    <div class=\"expiration-notice\">\n      <span class=\"notice-message\">Cupon {{ ((details?.expirationDate | appTimeDifference) < 0) ? 'expired' : 'expires' }} on:</span>\n      <span class=\"expiration-value\">\n        <app-text-shell [data]=\"details?.expirationDate | date:'mediumDate'\"></app-text-shell>\n      </span>\n    </div>\n  </div>\n\n  <div class=\"related-deals-wrapper\" *ngIf=\"details?.relatedDeals && details.relatedDeals.length > 0\">\n    <h3 class=\"related-deals-title\">More hot deals</h3>\n    <ion-row class=\"related-deal\" *ngFor=\"let deal of details.relatedDeals\">\n      <ion-col class=\"deal-logo-wrapper\" size=\"4\">\n        <app-aspect-ratio [ratio]=\"{w: 1, h: 1}\">\n          <app-image-shell [src]=\"deal.logo\" [alt]=\"'deals logo'\" class=\"related-deal-logo\" animation=\"spinner\"></app-image-shell>\n        </app-aspect-ratio>\n      </ion-col>\n      <ion-col class=\"deal-info-wrapper\" size=\"8\">\n        <h4 class=\"related-deal-title\">\n          <app-text-shell [data]=\"deal?.name\"></app-text-shell>\n        </h4>\n        <p class=\"related-deal-description\">\n          <app-text-shell [data]=\"deal?.description\"></app-text-shell>\n        </p>\n      </ion-col>\n    </ion-row>\n  </div>\n</ion-content>\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { DealsDetailsModel } from './deals-details.model';\n\n@Component({\n  selector: 'app-deals-details',\n  templateUrl: './deals-details.page.html',\n  styleUrls: [\n    './styles/deals-details.page.scss',\n    './styles/deals-details.shell.scss'\n  ]\n})\nexport class DealsDetailsPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  details: DealsDetailsModel;\n  slidesOptions: any = {\n    zoom: {\n      toggle: false // Disable zooming to prevent weird double tap zomming on slide images\n    }\n  };\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.details && this.details.isShell) ? true : false;\n  }\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    // On init, the route subscription is the active subscription\n    this.subscriptions = this.route.data\n    .subscribe(\n      (resolvedRouteData: IResolvedRouteData<DealsDetailsModel>) => {\n        // Route subscription resolved, now the active subscription is the Observable extracted from the resolved route data\n        this.subscriptions = ResolverHelper.extractData<DealsDetailsModel>(resolvedRouteData.data, DealsDetailsModel)\n        .subscribe(\n          (state) => {\n            this.details = state;\n          },\n          (error) => {}\n        );\n      },\n      (error) => {}\n    );\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { DealsService } from '../deals.service';\nimport { DealsDetailsModel } from './deals-details.model';\n\n@Injectable()\nexport class DealsDetailsResolver implements Resolve<DataStore<DealsDetailsModel>> {\n\n  constructor(private dealsService: DealsService) {}\n\n  resolve(): DataStore<DealsDetailsModel> {\n    const dataSource: Observable<DealsDetailsModel> = this.dealsService.getDetailsDataSource();\n    const dataStore: DataStore<DealsDetailsModel> = this.dealsService.getDetailsStore(dataSource);\n\n    return dataStore;\n  }\n}\n"]}
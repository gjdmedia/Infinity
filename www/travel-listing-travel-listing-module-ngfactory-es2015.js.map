{"version":3,"sources":["./src/app/travel/listing/travel-listing.module.ts","./src/app/travel/listing/travel-listing.page.html","./src/app/travel/listing/travel-listing.page.ts","./src/app/travel/listing/travel-listing.plain.resolver.ts","./src/app/travel/listing/travel-listing.resolver.ts","./src/app/utils/resolver-helper.ts"],"names":[],"mappings":"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","file":"travel-listing-travel-listing-module-ngfactory-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ComponentsModule } from '../../components/components.module';\n\nimport { TravelService } from '../travel.service';\nimport { TravelListingPage } from './travel-listing.page';\nimport { TravelListingResolver } from './travel-listing.resolver';\nimport { TravelListingPlainResolver } from './travel-listing.plain.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TravelListingPage,\n    resolve: {\n      data: TravelListingResolver\n      // data: TravelListingPlainResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ComponentsModule,\n    HttpClientModule\n  ],\n  declarations: [\n    TravelListingPage\n  ],\n  providers: [\n    TravelListingResolver,\n    TravelListingPlainResolver,\n    TravelService\n  ]\n})\nexport class TravelListingPageModule {}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"app/categories\"></ion-back-button>\n    </ion-buttons>\n    <ion-title>Travel Listing</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ng-container *ngIf=\"listing?.items\">\n    <div class=\"listing-item\" *ngFor=\"let item of listing.items\">\n      <ion-row class=\"image-row\">\n        <ion-col size=\"12\">\n          <app-image-shell [display]=\"'cover'\" class=\"add-overlay item-image\" [src]=\"item.image\" [routerLink]=\"['/app/categories/travel/', item.slug]\">\n            <app-aspect-ratio [ratio]=\"{w:3, h:2}\">\n              <div class=\"content-inside-item-image\">\n                <div class=\"item-icon\">\n                  <app-aspect-ratio [ratio]=\"{w:1, h:1}\">\n                    <app-image-shell [src]=\"item.icon\" class=\"icon-image\"></app-image-shell>\n                  </app-aspect-ratio>\n                </div>\n                <div class=\"item-cta\">\n                  <span>Explore</span>\n                  <ion-icon class=\"cta-icon\" name=\"arrow-forward\"></ion-icon>\n                </div>\n              </div>\n            </app-aspect-ratio>\n          </app-image-shell>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"info-row\">\n        <ion-col class=\"main-info-col\">\n          <h3 class=\"item-name\">\n            <a class=\"name-anchor\" [routerLink]=\"['/app/categories/travel/', item.slug]\">\n              <app-text-shell animation=\"bouncing\" [data]=\"(item?.name && item?.category) ? (item.name + ' - ' + item.category) : (item.name)\"></app-text-shell>\n            </a>\n          </h3>\n          <p class=\"item-description\">\n            <app-text-shell animation=\"bouncing\" [data]=\"item.description\" lines=\"3\"></app-text-shell>\n          </p>\n          <p class=\"item-address\">\n            <app-text-shell animation=\"bouncing\" [data]=\"item.address\"></app-text-shell>\n          </p>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"stats-row\">\n        <ion-col size=\"2\" class=\"item-rating\">\n          <span class=\"rating-value\">\n            <app-text-shell [data]=\"item.rating\"></app-text-shell>\n          </span>\n          <ion-icon class=\"stats-icon\" src=\"./assets/custom-icons/travel/star.svg\"></ion-icon>\n        </ion-col>\n        <ion-col size=\"2\" class=\"item-reviews\">\n          <span class=\"reviews-count\">\n            <app-text-shell [data]=\"item.reviewsCount\"></app-text-shell>\n          </span>\n          <ion-icon class=\"stats-icon\" src=\"./assets/custom-icons/travel/comments.svg\"></ion-icon>\n        </ion-col>\n      </ion-row>\n    </div>\n  </ng-container>\n</ion-content>\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { IResolvedRouteData, ResolverHelper } from '../../utils/resolver-helper';\nimport { TravelListingModel } from './travel-listing.model';\n// import { delay, finalize } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-travel-listing',\n  templateUrl: './travel-listing.page.html',\n  styleUrls: [\n    './styles/travel-listing.page.scss',\n    './styles/travel-listing.shell.scss'\n  ]\n})\nexport class TravelListingPage implements OnInit {\n  // Gather all component subscription in one place. Can be one Subscription or multiple (chained using the Subscription.add() method)\n  subscriptions: Subscription;\n\n  listing: TravelListingModel;\n\n  @HostBinding('class.is-shell') get isShell() {\n    return (this.listing && this.listing.isShell) ? true : false;\n  }\n\n  constructor(\n    private route: ActivatedRoute\n  ) { }\n\n  ngOnInit(): void {\n    // On init, the route subscription is the active subscription\n    this.subscriptions = this.route.data\n    // .pipe(\n    //   delay(2000),\n    //   finalize(() => console.log('dataSubscription [finalize()]'))\n    // )\n    .subscribe(\n      (resolvedRouteData: IResolvedRouteData<TravelListingModel>) => {\n        // Route subscription resolved, now the active subscription is the Observable extracted from the resolved route data\n        this.subscriptions = ResolverHelper.extractData<TravelListingModel>(resolvedRouteData.data, TravelListingModel)\n        // .pipe(\n        //   delay(8000),\n        //   finalize(() => console.log('listingDataStore.subscribe [finalize()]'))\n        // )\n        .subscribe(\n          (state) => {\n            // console.log('GOT STATE');\n            this.listing = state;\n          },\n          (error) => {}\n        );\n      },\n      (error) => {}\n    );\n  }\n\n  // NOTE: Ionic only calls ngOnDestroy if the page was popped (ex: when navigating back)\n  // Since ngOnDestroy might not fire when you navigate from the current page, use ionViewWillLeave to cleanup Subscriptions\n  ionViewWillLeave(): void {\n    // console.log('TravelListingPage [ionViewWillLeave]');\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { TravelService } from '../travel.service';\nimport { TravelListingModel } from './travel-listing.model';\n\n@Injectable()\nexport class TravelListingPlainResolver implements Resolve<TravelListingModel> {\n\n  constructor(private travelService: TravelService) {}\n\n  resolve(): Observable<TravelListingModel> {\n    return this.travelService.getListingDataSource();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { DataStore } from '../../shell/data-store';\nimport { TravelService } from '../travel.service';\nimport { TravelListingModel } from './travel-listing.model';\n\n@Injectable()\nexport class TravelListingResolver implements Resolve<DataStore<TravelListingModel>> {\n\n  constructor(private travelService: TravelService) {}\n\n  resolve(): DataStore<TravelListingModel> {\n    const dataSource: Observable<TravelListingModel> = this.travelService.getListingDataSource();\n    const dataStore: DataStore<TravelListingModel> = this.travelService.getListingStore(dataSource);\n\n    return dataStore;\n  }\n}\n","import { DataStore } from '../shell/data-store';\nimport { Observable, of } from 'rxjs';\n\nexport interface IResolvedRouteData<T> {\n  data: T | DataStore<T>;\n}\n\nexport class ResolverHelper<T> {\n  // More info on function overloads here: https://www.typescriptlang.org/docs/handbook/functions.html#overloads\n  public static extractData<T>(source: (T | DataStore<T>), constructor: (new(...args: any[]) => T)): Observable<T> {\n    if (source instanceof DataStore) {\n      return source.state;\n    } else if (source instanceof constructor) {\n      // The right side of instanceof should be an expression evaluating to a constructor function (ie. a class), not a type\n      // That's why we included an extra parameter which acts as a constructor function for type T\n      // (see: https://github.com/microsoft/TypeScript/issues/5236)\n      return of(source);\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}